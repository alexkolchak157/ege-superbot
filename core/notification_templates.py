"""
Ð¨Ð°Ð±Ð»Ð¾Ð½Ñ‹ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹ Ð´Ð»Ñ retention-ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸Ð¹.

Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÑÐµÐ³Ð¼ÐµÐ½Ñ‚Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.
Ð’ÑÐµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð²ÐºÐ»ÑŽÑ‡Ð°ÑŽÑ‚ Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¸ countdown Ð´Ð¾ Ð•Ð“Ð­.
"""

import logging
from datetime import datetime, date
from typing import Dict, Any, Optional, List
from enum import Enum

logger = logging.getLogger(__name__)

# Ð”Ð°Ñ‚Ð° Ð•Ð“Ð­ Ð¿Ð¾ Ð¾Ð±Ñ‰ÐµÑÑ‚Ð²Ð¾Ð·Ð½Ð°Ð½Ð¸ÑŽ
EGE_DATE = date(2026, 6, 11)


def days_until_ege() -> int:
    """Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð´Ð½ÐµÐ¹ Ð´Ð¾ Ð•Ð“Ð­"""
    today = date.today()
    delta = (EGE_DATE - today).days
    return max(0, delta)  # ÐÐµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼


class NotificationTrigger(Enum):
    """Ð¢Ñ€Ð¸Ð³Ð³ÐµÑ€Ñ‹ Ð´Ð»Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹"""
    # Bounced ÑÐµÐ³Ð¼ÐµÐ½Ñ‚
    BOUNCED_DAY1 = "bounced_day1"
    BOUNCED_DAY3 = "bounced_day3"

    # Curious ÑÐµÐ³Ð¼ÐµÐ½Ñ‚
    CURIOUS_DAY3 = "curious_day3"
    CURIOUS_DAY7 = "curious_day7"

    # Active Free ÑÐµÐ³Ð¼ÐµÐ½Ñ‚
    ACTIVE_FREE_DAY10 = "active_free_day10"
    ACTIVE_FREE_DAY20 = "active_free_day20"
    ACTIVE_FREE_LIMIT_WARNING = "active_free_limit_warning"

    # Trial Users ÑÐµÐ³Ð¼ÐµÐ½Ñ‚
    TRIAL_DAY3 = "trial_day3"
    TRIAL_EXPIRING_2DAYS = "trial_expiring_2days"
    TRIAL_EXPIRING_1DAY = "trial_expiring_1day"
    TRIAL_EXPIRED = "trial_expired"

    # Paying Inactive ÑÐµÐ³Ð¼ÐµÐ½Ñ‚
    PAYING_INACTIVE_DAY3 = "paying_inactive_day3"
    PAYING_INACTIVE_DAY7 = "paying_inactive_day7"
    PAYING_INACTIVE_DAY14 = "paying_inactive_day14"

    # Churn Risk ÑÐµÐ³Ð¼ÐµÐ½Ñ‚
    CHURN_RISK_7DAYS = "churn_risk_7days"
    CHURN_RISK_3DAYS = "churn_risk_3days"
    CHURN_RISK_1DAY = "churn_risk_1day"

    # Cancelled ÑÐµÐ³Ð¼ÐµÐ½Ñ‚
    CANCELLED_DAY1 = "cancelled_day1"
    CANCELLED_DAY3 = "cancelled_day3"
    CANCELLED_DAY7 = "cancelled_day7"


class NotificationTemplate:
    """Ð¨Ð°Ð±Ð»Ð¾Ð½ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ"""

    def __init__(self, text: str, buttons: Optional[List[Dict[str, str]]] = None):
        """
        Args:
            text: Ð¢ÐµÐºÑÑ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ (Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ {var})
            buttons: Ð¡Ð¿Ð¸ÑÐ¾Ðº ÐºÐ½Ð¾Ð¿Ð¾Ðº [{"text": "...", "callback_data": "..."}]
        """
        self.text = text
        self.buttons = buttons or []

    def render(self, variables: Dict[str, Any]) -> str:
        """
        Ð ÐµÐ½Ð´ÐµÑ€Ð¸Ñ‚ ÑˆÐ°Ð±Ð»Ð¾Ð½ Ñ Ð¿Ð¾Ð´ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¾Ð¹ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ….

        Args:
            variables: Ð¡Ð»Ð¾Ð²Ð°Ñ€ÑŒ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð´Ð»Ñ Ð¿Ð¾Ð´ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸

        Returns:
            ÐžÑ‚Ñ€ÐµÐ½Ð´ÐµÑ€ÐµÐ½Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚
        """
        # Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ days_to_ege
        variables['days_to_ege'] = days_until_ege()

        # Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÑÐºÐ»Ð¾Ð½ÐµÐ½Ð¸Ñ Ð´Ð½ÐµÐ¹
        days = variables.get('days_to_ege', 0)
        if days % 10 == 1 and days % 100 != 11:
            variables['days_word'] = 'Ð´ÐµÐ½ÑŒ'
        elif days % 10 in [2, 3, 4] and days % 100 not in [12, 13, 14]:
            variables['days_word'] = 'Ð´Ð½Ñ'
        else:
            variables['days_word'] = 'Ð´Ð½ÐµÐ¹'

        try:
            return self.text.format(**variables)
        except KeyError as e:
            logger.error(f"Missing variable in template: {e}")
            return self.text


# ==================== BOUNCED Ð¡Ð•Ð“ÐœÐ•ÐÐ¢ ====================

BOUNCED_TEMPLATES = {
    NotificationTrigger.BOUNCED_DAY1: NotificationTemplate(
        text="""ðŸ“š ÐŸÑ€Ð¸Ð²ÐµÑ‚, {first_name}!

Ð—Ð°Ð¼ÐµÑ‚Ð¸Ð»Ð¸, Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ ÐµÑ‰Ñ‘ Ð½Ðµ Ð½Ð°Ñ‡Ð°Ð» Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÑƒ.
Ð’Ð¾Ñ‚ ÐºÐ°Ðº ÑÑ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚:

1ï¸âƒ£ ÐÐ°Ð¶Ð¼Ð¸ "ðŸ“ Ð¢ÐµÑÑ‚Ð¾Ð²Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ"
2ï¸âƒ£ Ð’Ñ‹Ð±ÐµÑ€Ð¸ Ð»ÑŽÐ±ÑƒÑŽ Ñ‚ÐµÐ¼Ñƒ
3ï¸âƒ£ Ð ÐµÑˆÐ¸ 3-5 Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð²

Ð­Ñ‚Ð¾ Ð·Ð°Ð¹Ð¼Ñ‘Ñ‚ Ð²ÑÐµÐ³Ð¾ 5 Ð¼Ð¸Ð½ÑƒÑ‚, Ð° Ñ‚Ñ‹ Ð¿Ð¾Ð¹Ð¼Ñ‘ÑˆÑŒ ÐºÐ°Ðº ÑÑ‚Ð¾ ÐºÑ€ÑƒÑ‚Ð¾! ðŸš€

â° Ð”Ð¾ Ð•Ð“Ð­: {days_to_ege} {days_word}
ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ Ð½Ð° ÑÑ‡ÐµÑ‚Ñƒ!""",
        buttons=[
            {"text": "ðŸš€ ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¿Ñ€ÑÐ¼Ð¾ ÑÐµÐ¹Ñ‡Ð°Ñ", "callback_data": "to_main_menu"},
            {"text": "ðŸ”• ÐÐµ Ð±ÐµÑÐ¿Ð¾ÐºÐ¾Ð¸Ñ‚ÑŒ", "callback_data": "notifications_disable"}
        ]
    ),

    NotificationTrigger.BOUNCED_DAY3: NotificationTemplate(
        text="""ðŸ’¡ {first_name}, Ð¼Ñ‹ ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ð»Ð¸ Ð±Ð¾Ñ‚Ð°!

Ð¢ÐµÐ¿ÐµÑ€ÑŒ:
âœ¨ Ð‘Ñ‹ÑÑ‚Ñ€ÐµÐµ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÑŽÑ‚ÑÑ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹
âœ¨ ÐŸÐ¾Ð½ÑÑ‚Ð½ÐµÐµ Ð¾Ð±ÑŠÑÑÐ½ÐµÐ½Ð¸Ñ Ð¾ÑˆÐ¸Ð±Ð¾Ðº
âœ¨ Ð£Ð´Ð¾Ð±Ð½ÐµÐµ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ

Ð˜Ð´ÐµÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ!

ðŸŽ Ð£ Ñ‚ÐµÐ±Ñ ÐµÑÑ‚ÑŒ 3 Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ñ… AI-Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ ÑÐµÐ³Ð¾Ð´Ð½Ñ
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð»ÑŽÐ±Ð¾Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ðµ Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹ Ñ‡Ð°ÑÑ‚Ð¸ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾!

â° Ð”Ð¾ Ð•Ð“Ð­ Ð¾ÑÑ‚Ð°Ð»Ð¾ÑÑŒ {days_to_ege} {days_word}""",
        buttons=[
            {"text": "ðŸ’Ž ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ AI-Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ", "callback_data": "choose_task24"},
            {"text": "ðŸ“ ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ñ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð¹ Ñ‡Ð°ÑÑ‚Ð¸", "callback_data": "choose_test_part"}
        ]
    )
}

# ==================== CURIOUS Ð¡Ð•Ð“ÐœÐ•ÐÐ¢ ====================

CURIOUS_TEMPLATES = {
    NotificationTrigger.CURIOUS_DAY3: NotificationTemplate(
        text="""ðŸ’ª {first_name}, Ñ‚Ñ‹ ÑƒÐ¶Ðµ Ñ€ÐµÑˆÐ¸Ð» {answered_total} Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð²!

ÐÐ¾ Ð²Ð¾Ñ‚ Ñ‡Ñ‚Ð¾ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾:
Ð£Ñ‡ÐµÐ½Ð¸ÐºÐ¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ñ€ÐµÑˆÐ°ÑŽÑ‚ Ñ…Ð¾Ñ‚Ñ Ð±Ñ‹ 10 Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð²,
Ð² 3 Ñ€Ð°Ð·Ð° Ñ‡Ð°Ñ‰Ðµ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÑŽÑ‚ÑÑ Ð¸ ÑÐ´Ð°ÑŽÑ‚ Ð•Ð“Ð­ Ð½Ð° 80+

Ð¢ÐµÐ±Ðµ Ð¾ÑÑ‚Ð°Ð»Ð¾ÑÑŒ Ð²ÑÐµÐ³Ð¾ {questions_to_milestone} Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð´Ð¾ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ñ! ðŸŽ¯

Ð£ Ñ‚ÐµÐ±Ñ ÐµÑÑ‚ÑŒ {checks_remaining} Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ñ… AI-Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¾Ðº ÑÐµÐ³Ð¾Ð´Ð½Ñ.
ÐÐµ ÑƒÐ¿ÑƒÑÑ‚Ð¸!

â° Ð”Ð¾ Ð•Ð“Ð­: {days_to_ege} {days_word}""",
        buttons=[
            {"text": "ðŸ’¯ ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÑƒ", "callback_data": "to_main_menu"},
            {"text": "ðŸ”• ÐÐµ ÑÐµÐ¹Ñ‡Ð°Ñ", "callback_data": "notifications_snooze"}
        ]
    ),

    NotificationTrigger.CURIOUS_DAY7: NotificationTemplate(
        text="""ðŸ“ˆ {first_name}, Ð¿Ð¾ÐºÐ° Ñ‚Ñ‹ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¾Ð²Ð°Ð»:

â€¢ Ð”Ñ€ÑƒÐ³Ð¸Ðµ ÑƒÑ‡ÐµÐ½Ð¸ÐºÐ¸ Ñ€ÐµÑˆÐ¸Ð»Ð¸ Ð² ÑÑ€ÐµÐ´Ð½ÐµÐ¼ 50+ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð²
â€¢ 127 Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ð¾Ñ„Ð¾Ñ€Ð¼Ð¸Ð»Ð¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÑƒ
â€¢ 89% Ð¸Ð· Ð½Ð¸Ñ… ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ð»Ð¸ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð½Ð° 15+ Ð±Ð°Ð»Ð»Ð¾Ð²

ÐÐµ Ð¾Ñ‚ÑÑ‚Ð°Ð²Ð°Ð¹! ðŸš€

Ð¢Ð²Ð¾Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ: {answered_total} Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð²
Ð”Ð¾ Ð•Ð“Ð­: {days_to_ege} {days_word}

ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÑƒ Ð¸ Ð¾Ð±Ð³Ð¾Ð½Ð¸ Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ñ…!""",
        buttons=[
            {"text": "ðŸ”¥ Ð”Ð¾Ð³Ð½Ð°Ñ‚ÑŒ Ð¸ Ð¿ÐµÑ€ÐµÐ³Ð½Ð°Ñ‚ÑŒ", "callback_data": "to_main_menu"},
            {"text": "ðŸ’Ž Ð£Ð·Ð½Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÑƒ", "callback_data": "subscribe_start"}
        ]
    )
}

# ==================== ACTIVE FREE Ð¡Ð•Ð“ÐœÐ•ÐÐ¢ ====================

ACTIVE_FREE_TEMPLATES = {
    NotificationTrigger.ACTIVE_FREE_DAY10: NotificationTemplate(
        text="""ðŸŒŸ {first_name}, Ñƒ Ñ‚ÐµÐ±Ñ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ!

Ð—Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÑŽÑŽ Ð½ÐµÐ´ÐµÐ»ÑŽ:
âœ… {answered_week} Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ñ… Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð²
ðŸ“ˆ Ð¡Ñ‚Ñ€Ð¸Ðº: {current_streak} Ð´Ð½ÐµÐ¹ Ð¿Ð¾Ð´Ñ€ÑÐ´
ðŸ’¯ Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹ Ð±Ð°Ð»Ð»: Ñ€Ð°ÑÑ‚Ñ‘Ñ‚!

Ð—Ð½Ð°ÐµÑˆÑŒ Ñ‡Ñ‚Ð¾? Ð£Ñ‡ÐµÐ½Ð¸ÐºÐ¸ Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¾Ð¹ Ð³Ð¾Ñ‚Ð¾Ð²ÑÑ‚ÑÑ Ð² 2 Ñ€Ð°Ð·Ð° Ð±Ñ‹ÑÑ‚Ñ€ÐµÐµ.
Ð’Ð¾Ñ‚ Ð¿Ð¾Ñ‡ÐµÐ¼Ñƒ:

â€¢ Ð‘ÐµÐ·Ð»Ð¸Ð¼Ð¸Ñ‚Ð½Ñ‹Ðµ AI-Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ (ÑÐµÐ¹Ñ‡Ð°Ñ Ñƒ Ñ‚ÐµÐ±Ñ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ 3/Ð´ÐµÐ½ÑŒ)
â€¢ Ð—Ð°Ð´Ð°Ð½Ð¸Ñ 19-25 (ÑÐ°Ð¼Ñ‹Ðµ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ðµ, Ð½Ð¾ Ð´Ð°ÑŽÑ‚ 18 Ð±Ð°Ð»Ð»Ð¾Ð²!)
â€¢ Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ° ÑÐ»Ð°Ð±Ñ‹Ñ… Ð¼ÐµÑÑ‚

ðŸŽ ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹ 7 Ð´Ð½ÐµÐ¹ Ð·Ð° 1â‚½""",
        buttons=[
            {"text": "ðŸŽ ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ Ð·Ð° 1â‚½", "callback_data": "subscribe_start"},
            {"text": "ðŸ’Ž Ð£Ð·Ð½Ð°Ñ‚ÑŒ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ", "callback_data": "subscribe_start"}
        ]
    ),

    NotificationTrigger.ACTIVE_FREE_DAY20: NotificationTemplate(
        text="""ðŸ”¥ Ð’Ð°Ñƒ, {first_name}! Ð¢Ñ‹ Ð² Ñ‚Ð¾Ð¿-10% ÑÐ°Ð¼Ñ‹Ñ… Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… ÑƒÑ‡ÐµÐ½Ð¸ÐºÐ¾Ð²!

Ð¢Ð²Ð¾Ð¸ Ð´Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ñ:
ðŸ† Ð ÐµÑˆÐµÐ½Ð¾ Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹: {answered_total}
ðŸ“Š Ð”Ð½ÐµÐ¹ Ð¿Ð¾Ð´Ñ€ÑÐ´: {current_streak}
â­ Ð¢Ñ‹ Ð¼Ð¾Ð»Ð¾Ð´ÐµÑ†!

ÐÐ¾ ÐµÑÑ‚ÑŒ Ð½ÑŽÐ°Ð½Ñ...
Ð’Ñ‚Ð¾Ñ€Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ Ð•Ð“Ð­ Ð´Ð°Ñ‘Ñ‚ 60% Ð±Ð°Ð»Ð»Ð¾Ð², Ð° Ñƒ Ñ‚ÐµÐ±Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ 3 Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð² Ð´ÐµÐ½ÑŒ.

ðŸŽ¯ Ð£Ñ‡ÐµÐ½Ð¸ÐºÐ¸ Ñ Premium ÑÐ´Ð°ÑŽÑ‚ Ð½Ð° 90+:
â€¢ Ð‘ÐµÐ·Ð»Ð¸Ð¼Ð¸Ñ‚Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ AI
â€¢ Ð­Ñ‚Ð°Ð»Ð¾Ð½Ð½Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð¿Ð¾ Ð²ÑÐµÐ¼ Ñ‚ÐµÐ¼Ð°Ð¼
â€¢ Ð›Ð¸Ñ‡Ð½Ð°Ñ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¸ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸

Ð”Ð¾ Ð•Ð“Ð­ {days_to_ege} {days_word}. Ð’Ñ€ÐµÐ¼Ñ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ!

ðŸŽ Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð´Ð»Ñ Ñ‚Ð¾Ð¿Ð¾Ð²Ñ‹Ñ…: ÑÐºÐ¸Ð´ÐºÐ° 20%
ÐŸÑ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´: TOP20""",
        buttons=[
            {"text": "ðŸ’Ž ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐºÐ¸Ð´ÐºÑƒ", "callback_data": "subscribe_start"},
            {"text": "ðŸ“Š ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ", "callback_data": "to_main_menu"}
        ]
    ),

    NotificationTrigger.ACTIVE_FREE_LIMIT_WARNING: NotificationTemplate(
        text="""âš ï¸ {first_name}, Ð¾ÑÑ‚Ð°Ð»Ð°ÑÑŒ 1 Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°!

Ð¢Ñ‹ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ Ð³Ð¾Ñ‚Ð¾Ð²Ð¸ÑˆÑŒÑÑ - ÑÑ‚Ð¾ ÐºÑ€ÑƒÑ‚Ð¾! ðŸ”¥
ÐÐ¾ Ñ‡ÐµÑ€ÐµÐ· 1 Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ Ð»Ð¸Ð¼Ð¸Ñ‚ Ð·Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ñ‚ÑÑ Ð´Ð¾ Ð·Ð°Ð²Ñ‚Ñ€Ð°.

ðŸ’¡ ÐÐµ Ð¾ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°Ð¹ÑÑ Ð½Ð° ÑÐ°Ð¼Ð¾Ð¼ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾Ð¼!

Ð¡ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¾Ð¹:
â€¢ Ð‘ÐµÐ·Ð»Ð¸Ð¼Ð¸Ñ‚Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ AI
â€¢ ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð° ÑÐµÐºÑƒÐ½Ð´Ñ‹
â€¢ Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ€Ð°Ð·Ð±Ð¾Ñ€ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð¾ÑˆÐ¸Ð±ÐºÐ¸

ðŸŽ ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹ 7 Ð´Ð½ÐµÐ¹ Ð·Ð° 1â‚½
Ð”Ð¾ Ð•Ð“Ð­ {days_to_ege} {days_word} - Ð½Ðµ Ñ‚ÐµÑ€ÑÐ¹ Ñ‚ÐµÐ¼Ð¿!""",
        buttons=[
            {"text": "ðŸš€ ÐŸÐ¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ Ð·Ð° 1â‚½", "callback_data": "subscribe_start"},
            {"text": "â° ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ñƒ Ð´Ð¾ Ð·Ð°Ð²Ñ‚Ñ€Ð°", "callback_data": "notifications_snooze"}
        ]
    )
}

# ==================== TRIAL USERS Ð¡Ð•Ð“ÐœÐ•ÐÐ¢ ====================

TRIAL_TEMPLATES = {
    NotificationTrigger.TRIAL_DAY3: NotificationTemplate(
        text="""ðŸ‘‹ {first_name}, ÐºÐ°Ðº Ñ‚ÐµÐ±Ðµ trial?

Ð¢Ñ‹ ÑƒÐ¶Ðµ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ð» Ð²ÑÐµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸?

âœ… AI-Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹ 19-25
âœ… Ð­Ñ‚Ð°Ð»Ð¾Ð½Ð½Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹
âœ… Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½ÑƒÑŽ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÑƒ

Ð•ÑÐ»Ð¸ ÐµÑ‰Ñ‘ Ð½ÐµÑ‚ - ÑÐºÐ¾Ñ€ÐµÐµ Ñ‚ÐµÑÑ‚Ð¸Ñ€ÑƒÐ¹!
Ð”Ð¾ ÐºÐ¾Ð½Ñ†Ð° Ñ‚Ñ€Ð¸Ð°Ð»Ð°: {days_until_expiry} {days_word}

ðŸ’¡ Ð’Ð¾Ð¿Ñ€Ð¾ÑÑ‹? ÐÐ°Ð¿Ð¸ÑˆÐ¸ @obshestvonapalcahsupport""",
        buttons=[
            {"text": "ðŸŽ¯ ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ð½Ð¸Ðµ", "callback_data": "choose_task24"},
            {"text": "ðŸ“Š ÐœÐ¾Ñ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°", "callback_data": "to_main_menu"}
        ]
    ),

    NotificationTrigger.TRIAL_EXPIRING_2DAYS: NotificationTemplate(
        text="""â° {first_name}, Ñ‡ÐµÑ€ÐµÐ· 2 Ð´Ð½Ñ Ñ‚Ð²Ð¾Ð¹ trial Ð·Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ñ‚ÑÑ

Ð—Ð° ÑÑ‚Ð¸ Ð´Ð½Ð¸ Ñ‚Ñ‹:
âœ… Ð ÐµÑˆÐ¸Ð» {answered_total} Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹ Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹ Ñ‡Ð°ÑÑ‚Ð¸
âœ… ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ð» {ai_checks_total} Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¾Ðº Ð¾Ñ‚ AI
âœ… Ð£Ð»ÑƒÑ‡ÑˆÐ¸Ð» Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹!

ðŸŽ¯ Ð£Ñ‡ÐµÐ½Ð¸ÐºÐ¸ Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¾Ð¹ ÑÐ´Ð°ÑŽÑ‚ Ð½Ð° 15+ Ð±Ð°Ð»Ð»Ð¾Ð² Ð²Ñ‹ÑˆÐµ!

ÐŸÑ€Ð¾Ð´Ð»Ð¸ ÑÐµÐ¹Ñ‡Ð°Ñ ÑÐ¾ ÑÐºÐ¸Ð´ÐºÐ¾Ð¹ 20% Ð½Ð° Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ð¼ÐµÑÑÑ†:
Ð’Ð¼ÐµÑÑ‚Ð¾ 249â‚½ â†’ Ð²ÑÐµÐ³Ð¾ 199â‚½

ÐŸÑ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´: TRIAL20

â° Ð”Ð¾ Ð•Ð“Ð­: {days_to_ege} {days_word}""",
        buttons=[
            {"text": "ðŸ’Ž ÐŸÑ€Ð¾Ð´Ð»Ð¸Ñ‚ÑŒ ÑÐ¾ ÑÐºÐ¸Ð´ÐºÐ¾Ð¹", "callback_data": "subscribe_start"},
            {"text": "â° ÐÐ°Ð¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑŒ Ð·Ð°Ð²Ñ‚Ñ€Ð°", "callback_data": "notifications_snooze"}
        ]
    ),

    NotificationTrigger.TRIAL_EXPIRING_1DAY: NotificationTemplate(
        text="""ðŸš¨ {first_name}, Ð—ÐÐ’Ð¢Ð Ð trial Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°ÐµÑ‚ÑÑ!

Ð§ÐµÑ€ÐµÐ· 24 Ñ‡Ð°ÑÐ° Ñ‚Ñ‹ Ð¿Ð¾Ñ‚ÐµÑ€ÑÐµÑˆÑŒ:
âŒ Ð‘ÐµÐ·Ð»Ð¸Ð¼Ð¸Ñ‚Ð½Ñ‹Ðµ AI-Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸
âŒ Ð—Ð°Ð´Ð°Ð½Ð¸Ñ 19-25
âŒ Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½ÑƒÑŽ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÑƒ
âŒ Ð­Ñ‚Ð°Ð»Ð¾Ð½Ð½Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹

Ð¢Ð²Ð¾Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ:
ðŸ“ˆ {answered_total} Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹ Ñ€ÐµÑˆÐµÐ½Ð¾
ðŸŽ¯ Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹ Ð±Ð°Ð»Ð» Ñ€Ð°ÑÑ‚Ñ‘Ñ‚

ÐÐµ Ð¾ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°Ð¹ÑÑ! ÐŸÑ€Ð¾Ð´Ð»Ð¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÑƒ ÑÐ¾ ÑÐºÐ¸Ð´ÐºÐ¾Ð¹ 25%:

ðŸŽ LASTDAY25 â€” Ð¿Ñ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´ Ð½Ð° 25% ÑÐºÐ¸Ð´ÐºÑƒ
(Ð´ÐµÐ¹ÑÑ‚Ð²ÑƒÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ)

Ð”Ð¾ Ð•Ð“Ð­ {days_to_ege} {days_word}. ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ Ð²Ð°Ð¶ÐµÐ½!""",
        buttons=[
            {"text": "ðŸ”¥ ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ LASTDAY25", "callback_data": "subscribe_start"},
            {"text": "âŒ ÐžÑ‚ÐºÐ°Ð¶ÑƒÑÑŒ Ð¾Ñ‚ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸", "callback_data": "trial_cancel_confirm"}
        ]
    ),

    NotificationTrigger.TRIAL_EXPIRED: NotificationTemplate(
        text="""â° {first_name}, Ñ‚Ð²Ð¾Ð¹ trial Ð¸ÑÑ‚Ñ‘Ðº

ÐÐ¾ Ð²Ð¾Ñ‚ Ñ„Ð°ÐºÑ‚Ñ‹:
â€¢ Ð¢Ñ‹ Ñ€ÐµÑˆÐ¸Ð» {answered_total} Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹
â€¢ Ð¢Ñ‹ Ð²Ð¸Ð´ÐµÐ» ÑÐ²Ð¾Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ
â€¢ Ð¢Ñ‹ Ð·Ð½Ð°ÐµÑˆÑŒ, Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

87% ÑƒÑ‡ÐµÐ½Ð¸ÐºÐ¾Ð², ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¿Ñ€Ð¾Ð´Ð»Ð¸Ð»Ð¸ trial,
Ð³Ð¾Ð²Ð¾Ñ€ÑÑ‚: "Ð›ÑƒÑ‡ÑˆÐµÐµ Ð²Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð² Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÑƒ"

ðŸŽ ÐŸÐžÐ¡Ð›Ð•Ð”ÐÐ˜Ð™ Ð¨ÐÐÐ¡:
ÐŸÑ€Ð¾Ð´Ð»Ð¸ Ð² Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ 24 Ñ‡Ð°ÑÐ¾Ð² Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸:
â€¢ Ð¡ÐºÐ¸Ð´ÐºÑƒ 30% (Ð¿Ñ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´: COMEBACK30)
â€¢ +3 Ð´Ð½Ñ Ð² Ð¿Ð¾Ð´Ð°Ñ€Ð¾Ðº
â€¢ Ð‘Ð¾Ð½ÑƒÑÐ½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð¿Ð¾ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ð¼ Ñ‚ÐµÐ¼Ð°Ð¼

Ð”Ð¾ Ð•Ð“Ð­ {days_to_ege} {days_word}. ÐÐµ ÑƒÐ¿ÑƒÑÑ‚Ð¸ Ð²Ñ€ÐµÐ¼Ñ!""",
        buttons=[
            {"text": "ðŸ’Ž ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ COMEBACK30", "callback_data": "subscribe_start"},
            {"text": "ðŸ†“ ÐžÑÑ‚Ð°Ñ‚ÑŒÑÑ Ð½Ð° Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾Ð¼", "callback_data": "to_main_menu"}
        ]
    )
}

# ==================== PAYING INACTIVE Ð¡Ð•Ð“ÐœÐ•ÐÐ¢ ====================

PAYING_INACTIVE_TEMPLATES = {
    NotificationTrigger.PAYING_INACTIVE_DAY3: NotificationTemplate(
        text="""ðŸ’­ Ð¡ÐºÑƒÑ‡Ð°ÐµÐ¼ Ð¿Ð¾ Ñ‚ÐµÐ±Ðµ, {first_name}!

ÐÐµ Ð·Ð°Ñ…Ð¾Ð´Ð¸Ð» ÑƒÐ¶Ðµ 3 Ð´Ð½Ñ. Ð’ÑÑ‘ Ð² Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ?

ÐŸÐ¾ÐºÐ° Ñ‚Ñ‹ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¾Ð²Ð°Ð»:
â€¢ Ð”Ñ€ÑƒÐ³Ð¸Ðµ ÑƒÑ‡ÐµÐ½Ð¸ÐºÐ¸ Ð¿Ñ€Ð¾ÑˆÐ»Ð¸ Ð² ÑÑ€ÐµÐ´Ð½ÐµÐ¼ 12 Ð½Ð¾Ð²Ñ‹Ñ… Ñ‚ÐµÐ¼
â€¢ Ð”Ð¾ Ð•Ð“Ð­ Ð¾ÑÑ‚Ð°Ð»Ð¾ÑÑŒ {days_to_ege} {days_word}

Ð£ Ñ‚ÐµÐ±Ñ ÐµÑÑ‚ÑŒ Premium-Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ð´Ð¾ {subscription_end}.
Ð”Ð°Ð²Ð°Ð¹ Ð½Ðµ Ð±ÑƒÐ´ÐµÐ¼ Ñ‚ÐµÑ€ÑÑ‚ÑŒ ÐµÐ³Ð¾ Ð·Ñ€Ñ? ðŸ’ª

ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸ Ñ Ð»ÑŽÐ±Ð¾Ð³Ð¾ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ:""",
        buttons=[
            {"text": "ðŸŽ¯ Ð—Ð°Ð´Ð°Ð½Ð¸Ðµ 24 (ÐŸÐ»Ð°Ð½)", "callback_data": "choose_task24"},
            {"text": "ðŸ“ Ð¢ÐµÑÑ‚Ð¾Ð²Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ", "callback_data": "choose_test_part"},
            {"text": "ðŸ˜” Ð¯ Ð¿ÐµÑ€ÐµÐ´ÑƒÐ¼Ð°Ð» Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑŒÑÑ", "callback_data": "feedback_why_inactive"}
        ]
    ),

    NotificationTrigger.PAYING_INACTIVE_DAY7: NotificationTemplate(
        text="""ðŸ˜¢ {first_name}, Ð¼Ñ‹ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð´ÐµÐ»Ð°ÐµÐ¼ Ð½Ðµ Ñ‚Ð°Ðº?

Ð¢Ñ‹ Ð½Ðµ Ð·Ð°Ñ…Ð¾Ð´Ð¸ÑˆÑŒ ÑƒÐ¶Ðµ Ð½ÐµÐ´ÐµÐ»ÑŽ, Ñ…Ð¾Ñ‚Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ° Ð°ÐºÑ‚Ð¸Ð²Ð½Ð°.

ÐœÐ¾Ð¶ÐµÑ‚ Ð½Ð°Ð¼ ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒ:
â€¢ Ð˜Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð±Ð¾Ñ‚Ð°?
â€¢ ÐžÐ±ÑŠÑÑÐ½ÐµÐ½Ð¸Ñ Ð¾ÑˆÐ¸Ð±Ð¾Ðº?
â€¢ Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹?

ðŸ’¬ ÐÐ°Ð¿Ð¸ÑˆÐ¸, Ñ‡Ñ‚Ð¾ Ð½Ðµ Ð½Ñ€Ð°Ð²Ð¸Ñ‚ÑÑ: @obshestvonapalcahsupport
ÐœÑ‹ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð¸Ð¼!

Ð˜Ð»Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½Ð°Ð¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑŒ Ð¾ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐµ?
Ð”Ð¾ Ð•Ð“Ð­ {days_to_ege} {days_word} - Ð²Ñ€ÐµÐ¼Ñ Ð½Ðµ Ð¶Ð´Ñ‘Ñ‚!""",
        buttons=[
            {"text": "ðŸ’ª ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÑƒ", "callback_data": "to_main_menu"},
            {"text": "ðŸ’¬ ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð² Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÑƒ", "url": "https://t.me/obshestvonapalcahsupport"},
            {"text": "ðŸ”• ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÑƒ", "callback_data": "cancel_subscription"}
        ]
    ),

    NotificationTrigger.PAYING_INACTIVE_DAY14: NotificationTemplate(
        text="""âš ï¸ {first_name}, Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ° ÑÐºÐ¾Ñ€Ð¾ Ð·Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ñ‚ÑÑ

Ð¢Ñ‹ Ð½Ðµ Ð·Ð°Ñ…Ð¾Ð´Ð¸Ð» 2 Ð½ÐµÐ´ÐµÐ»Ð¸.
ÐŸÐ¾Ð´Ð¿Ð¸ÑÐºÐ° Ð°ÐºÑ‚Ð¸Ð²Ð½Ð° Ð´Ð¾ {subscription_end} ({days_until_expiry} {days_word}).

Ð—Ð° Ñ‚Ð²Ð¾Ð¸ Ð´ÐµÐ½ÑŒÐ³Ð¸ ÑƒÑ…Ð¾Ð´ÑÑ‚ Ð²Ð¿ÑƒÑÑ‚ÑƒÑŽ ðŸ’¸

ÐœÐ¾Ð¶ÐµÑ‚ Ð¾Ñ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¿Ñ€Ð¾Ð´Ð»ÐµÐ½Ð¸Ðµ?
Ð˜Ð»Ð¸ Ð²ÑÑ‘-Ñ‚Ð°ÐºÐ¸ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ð¼ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÑƒ?

Ð”Ð¾ Ð•Ð“Ð­ {days_to_ege} {days_word}.
Ð•ÑÐ»Ð¸ Ð½Ðµ ÑÐµÐ¹Ñ‡Ð°Ñ, Ñ‚Ð¾ ÐºÐ¾Ð³Ð´Ð°?""",
        buttons=[
            {"text": "ðŸš€ ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÑƒ", "callback_data": "to_main_menu"},
            {"text": "â¸ ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¿Ñ€Ð¾Ð´Ð»ÐµÐ½Ð¸Ðµ", "callback_data": "disable_auto_renew"},
            {"text": "âŒ ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÑƒ", "callback_data": "cancel_subscription"}
        ]
    )
}

# ==================== CHURN RISK Ð¡Ð•Ð“ÐœÐ•ÐÐ¢ ====================

CHURN_RISK_TEMPLATES = {
    NotificationTrigger.CHURN_RISK_7DAYS: NotificationTemplate(
        text="""âš ï¸ {first_name}, Ñ‡ÐµÑ€ÐµÐ· Ð½ÐµÐ´ÐµÐ»ÑŽ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ° Ð·Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ñ‚ÑÑ

Ð—Ð°Ð¼ÐµÑ‚Ð¸Ð»Ð¸, Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ ÑÑ‚Ð°Ð» Ð·Ð°Ð½Ð¸Ð¼Ð°Ñ‚ÑŒÑÑ Ñ€ÐµÐ¶Ðµ.
Ð’ÑÑ‘ Ð² Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ?

Ð¢Ð²Ð¾Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ:
ðŸ“Š Ð ÐµÑˆÐµÐ½Ð¾: {answered_total} Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹
ðŸ“ˆ Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ðµ: Ð²Ð¸Ð´Ð¸Ð¼Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ!
ðŸŽ¯ ÐžÑÑ‚Ð°Ð»Ð¾ÑÑŒ Ð´Ð¾ Ñ†ÐµÐ»Ð¸: ÑÐ¾Ð²ÑÐµÐ¼ Ñ‡ÑƒÑ‚ÑŒ-Ñ‡ÑƒÑ‚ÑŒ

ÐÐµ Ð¾ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°Ð¹ÑÑ Ð½Ð° Ð¿Ð¾Ð»Ð¿ÑƒÑ‚Ð¸!

ðŸŽ ÐŸÑ€Ð¾Ð´Ð»Ð¸ ÑÐµÐ¹Ñ‡Ð°Ñ Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸ ÑÐºÐ¸Ð´ÐºÑƒ 15%:
ÐŸÑ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´: STAY15

Ð”Ð¾ Ð•Ð“Ð­ {days_to_ege} {days_word}""",
        buttons=[
            {"text": "ðŸ’Ž ÐŸÑ€Ð¾Ð´Ð»Ð¸Ñ‚ÑŒ ÑÐ¾ ÑÐºÐ¸Ð´ÐºÐ¾Ð¹", "callback_data": "subscribe_start"},
            {"text": "ðŸ”„ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¿Ñ€Ð¾Ð´Ð»ÐµÐ½Ð¸Ðµ", "callback_data": "enable_auto_renew"}
        ]
    ),

    NotificationTrigger.CHURN_RISK_3DAYS: NotificationTemplate(
        text="""ðŸš¨ {first_name}, Ñ‡ÐµÑ€ÐµÐ· 3 Ð´Ð½Ñ Ñ‚Ñ‹ Ð¿Ð¾Ñ‚ÐµÑ€ÑÐµÑˆÑŒ Ð²ÐµÑÑŒ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ!

ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€Ð¸ Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ Ð´Ð¾ÑÑ‚Ð¸Ð³ Ñ Ð½Ð°Ð¼Ð¸:
ðŸ“Š Ð ÐµÑˆÐµÐ½Ð¾ {answered_total} Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹
ðŸ“ˆ ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ: Ð²Ð¸Ð´ÐµÐ½ Ñ€Ð¾ÑÑ‚!
ðŸŽ¯ Ð¢Ð²Ð¾Ð¹ ÑÑ€ÐµÐ´Ð½Ð¸Ð¹ Ð±Ð°Ð»Ð» Ð²Ñ‹Ñ€Ð¾Ñ!

ÐÐµ Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚!

ÐŸÑ€Ð¾Ð´Ð»Ð¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÑƒ ÑÐ¾ ÑÐºÐ¸Ð´ÐºÐ¾Ð¹ 25%:
ðŸŽ ÐŸÑ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´: SAVE25

Ð˜Ð»Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ Ð°Ð²Ñ‚Ð¾Ð¿Ñ€Ð¾Ð´Ð»ÐµÐ½Ð¸Ðµ - ÑƒÐ´Ð¾Ð±Ð½Ð¾ Ð¸ Ð²Ñ‹Ð³Ð¾Ð´Ð½Ð¾!

Ð”Ð¾ Ð•Ð“Ð­ {days_to_ege} {days_word}. ÐÐµ ÑÐ´Ð°Ð²Ð°Ð¹ÑÑ ÑÐµÐ¹Ñ‡Ð°Ñ!""",
        buttons=[
            {"text": "ðŸ’Ž ÐŸÑ€Ð¾Ð´Ð»Ð¸Ñ‚ÑŒ SAVE25", "callback_data": "subscribe_start"},
            {"text": "ðŸ”„ Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¿Ñ€Ð¾Ð´Ð»ÐµÐ½Ð¸Ðµ", "callback_data": "enable_auto_renew"},
            {"text": "ðŸ“Š ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ", "callback_data": "to_main_menu"}
        ]
    ),

    NotificationTrigger.CHURN_RISK_1DAY: NotificationTemplate(
        text="""âš ï¸ ÐšÐ Ð˜Ð¢Ð˜Ð§ÐÐž: {first_name}, Ð—ÐÐ’Ð¢Ð Ð Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ° Ð·Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ñ‚ÑÑ!

Ð§ÐµÑ€ÐµÐ· 24 Ñ‡Ð°ÑÐ° Ñ‚Ñ‹ Ð¿Ð¾Ñ‚ÐµÑ€ÑÐµÑˆÑŒ:
âŒ Ð‘ÐµÐ·Ð»Ð¸Ð¼Ð¸Ñ‚Ð½Ñ‹Ðµ AI-Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸
âŒ Ð’ÑÐµ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹ Ñ‡Ð°ÑÑ‚Ð¸
âŒ Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½ÑƒÑŽ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÑƒ
âŒ Ð¡Ð²Ð¾Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ Ð¸ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ

Ð¢Ñ‹ Ð¿Ñ€Ð°Ð²Ð´Ð° Ñ…Ð¾Ñ‡ÐµÑˆÑŒ Ð²ÑÑ‘ Ð¿Ð¾Ñ‚ÐµÑ€ÑÑ‚ÑŒ?

ðŸ”¥ ÐŸÐžÐ¡Ð›Ð•Ð”ÐÐ˜Ð™ Ð¨ÐÐÐ¡:
ÐŸÑ€Ð¾Ð´Ð»Ð¸ Ð¿Ñ€ÑÐ¼Ð¾ ÑÐµÐ¹Ñ‡Ð°Ñ Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸:
â€¢ Ð¡ÐºÐ¸Ð´ÐºÑƒ 30% (Ð¿Ñ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´: URGENT30)
â€¢ +5 Ð´Ð½ÐµÐ¹ Ð² Ð¿Ð¾Ð´Ð°Ñ€Ð¾Ðº
â€¢ ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ¸

Ð”Ð¾ Ð•Ð“Ð­ {days_to_ege} {days_word}!""",
        buttons=[
            {"text": "ðŸš¨ ÐŸÑ€Ð¾Ð´Ð»Ð¸Ñ‚ÑŒ URGENT30", "callback_data": "subscribe_start"},
            {"text": "ðŸ”„ ÐÐ²Ñ‚Ð¾Ð¿Ñ€Ð¾Ð´Ð»ÐµÐ½Ð¸Ðµ (Ð²Ñ‹Ð³Ð¾Ð´Ð½ÐµÐµ)", "callback_data": "enable_auto_renew"}
        ]
    )
}

# ==================== CANCELLED Ð¡Ð•Ð“ÐœÐ•ÐÐ¢ ====================

CANCELLED_TEMPLATES = {
    NotificationTrigger.CANCELLED_DAY1: NotificationTemplate(
        text="""ðŸ’” Ð–Ð°Ð»ÑŒ, Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ ÑƒÑˆÑ‘Ð», {first_name}

ÐœÑ‹ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÐµÐ¼ - Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ðº Ð•Ð“Ð­ ÑÑ‚Ð¾ ÑÑ‚Ñ€ÐµÑÑ.

ÐœÐ¾Ð¶ÐµÑ‚ Ð¼Ñ‹ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ ÑÐ´ÐµÐ»Ð°Ð»Ð¸ Ð½Ðµ Ñ‚Ð°Ðº?
ÐÐ°Ð¿Ð¸ÑˆÐ¸ Ð½Ð°Ð¼, Ð¼Ñ‹ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ð¼ÑÑ!
@obshestvonapalcahsupport

Ð¢Ð²Ð¾Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ Ð¾ÑÑ‚Ð°Ñ‘Ñ‚ÑÑ Ñ Ñ‚Ð¾Ð±Ð¾Ð¹:
ðŸ“Š {answered_total} Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹ Ñ€ÐµÑˆÐµÐ½Ð¾
ðŸ“ˆ Ð’Ð¸Ð´ÐµÐ½ Ñ€Ð¾ÑÑ‚!

Ð‘ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð°Ñ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ Ð²ÑÐµÐ³Ð´Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð°.
Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ð¹ÑÑ ÐºÐ¾Ð³Ð´Ð° Ð±ÑƒÐ´ÐµÑˆÑŒ Ð³Ð¾Ñ‚Ð¾Ð²! ðŸ’ª""",
        buttons=[
            {"text": "ðŸ“ ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾", "callback_data": "to_main_menu"},
            {"text": "ðŸ’¬ ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð² Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÑƒ", "url": "https://t.me/obshestvonapalcahsupport"}
        ]
    ),

    NotificationTrigger.CANCELLED_DAY3: NotificationTemplate(
        text="""ðŸ¤” {first_name}, Ñ‚Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½ Ð² Ñ€ÐµÑˆÐµÐ½Ð¸Ð¸?

Ð˜Ð· ÑƒÑ‡ÐµÐ½Ð¸ÐºÐ¾Ð², ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ ÑƒÑˆÐ»Ð¸ Ð° Ð¿Ð¾Ñ‚Ð¾Ð¼ Ð²ÐµÑ€Ð½ÑƒÐ»Ð¸ÑÑŒ,
87% Ð³Ð¾Ð²Ð¾Ñ€ÑÑ‚: "Ð—Ñ€Ñ Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ» Ð²Ñ€ÐµÐ¼Ñ"

Ð¤Ð°ÐºÑ‚Ñ‹:
â€¢ Ð¢Ð²Ð¾Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ Ð±Ñ‹Ð» Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¼
â€¢ Ð¢Ñ‹ Ð·Ð½Ð°ÐµÑˆÑŒ, Ñ‡Ñ‚Ð¾ Ð±Ð¾Ñ‚ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚
â€¢ Ð”Ð¾ Ð•Ð“Ð­ {days_to_ege} {days_word}

ðŸŽ Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¢ÐžÐ›Ð¬ÐšÐž Ð”Ð›Ð¯ Ð¢Ð•Ð‘Ð¯:
Ð’ÐµÑ€Ð½Ð¸ÑÑŒ Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸ 40% ÑÐºÐ¸Ð´ÐºÑƒ Ð½Ð° Ð¼ÐµÑÑÑ†

ÐŸÑ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´: RETURN40
(Ð´ÐµÐ¹ÑÑ‚Ð²ÑƒÐµÑ‚ 3 Ð´Ð½Ñ)""",
        buttons=[
            {"text": "ðŸŽ ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ RETURN40", "callback_data": "subscribe_start"},
            {"text": "ðŸ†“ ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾", "callback_data": "to_main_menu"}
        ]
    ),

    NotificationTrigger.CANCELLED_DAY7: NotificationTemplate(
        text="""âš¡ {first_name}, Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ ÑˆÐ°Ð½Ñ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ!

Ð—Ð° Ð½ÐµÐ´ÐµÐ»ÑŽ Ð±ÐµÐ· Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ¸:
â€¢ Ð”Ñ€ÑƒÐ³Ð¸Ðµ Ð¿Ñ€Ð¾ÑˆÐ»Ð¸ 50+ Ñ‚ÐµÐ¼
â€¢ ÐœÐ½Ð¾Ð³Ð¸Ðµ ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ð»Ð¸ Ð±Ð°Ð»Ð»Ñ‹ Ð½Ð° 10-15 Ð¿ÑƒÐ½ÐºÑ‚Ð¾Ð²
â€¢ Ð¢Ñ‹ Ð¿Ð¾Ñ‚ÐµÑ€ÑÐ» Ñ‚ÐµÐ¼Ð¿

Ð”Ð¾ Ð•Ð“Ð­ {days_to_ege} {days_word}.
ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ Ð½Ð° Ð²ÐµÑ Ð·Ð¾Ð»Ð¾Ñ‚Ð°!

ðŸ”¥ Ð¡Ð£ÐŸÐ•Ð -ÐŸÐ Ð•Ð”Ð›ÐžÐ–Ð•ÐÐ˜Ð•:
50% ÑÐºÐ¸Ð´ÐºÐ° + Ð±Ð¾Ð½ÑƒÑÐ½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹

ÐŸÑ€Ð¾Ð¼Ð¾ÐºÐ¾Ð´: LAST50
(Ð´ÐµÐ¹ÑÑ‚Ð²ÑƒÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐµÐ³Ð¾Ð´Ð½Ñ)

Ð­Ñ‚Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐµ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ.
ÐŸÐ¾ÑÐ»Ðµ ÑÑ‚Ð¾Ð³Ð¾ - Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾Ð»Ð½Ð°Ñ Ñ†ÐµÐ½Ð°.""",
        buttons=[
            {"text": "ðŸ”¥ Ð’ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ LAST50", "callback_data": "subscribe_start"},
            {"text": "âŒ Ð¢Ð¾Ñ‡Ð½Ð¾ Ð½Ðµ Ð²ÐµÑ€Ð½ÑƒÑÑŒ", "callback_data": "unsubscribe_forever"}
        ]
    )
}


# Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð²ÑÐµÑ… ÑˆÐ°Ð±Ð»Ð¾Ð½Ð¾Ð²
ALL_TEMPLATES = {
    **BOUNCED_TEMPLATES,
    **CURIOUS_TEMPLATES,
    **ACTIVE_FREE_TEMPLATES,
    **TRIAL_TEMPLATES,
    **PAYING_INACTIVE_TEMPLATES,
    **CHURN_RISK_TEMPLATES,
    **CANCELLED_TEMPLATES
}


def get_template(trigger: NotificationTrigger) -> Optional[NotificationTemplate]:
    """Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ ÑˆÐ°Ð±Ð»Ð¾Ð½ Ð¿Ð¾ Ñ‚Ñ€Ð¸Ð³Ð³ÐµÑ€Ñƒ"""
    return ALL_TEMPLATES.get(trigger)
