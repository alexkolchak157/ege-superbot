# üëë –ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

–ü–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤—Å–µ—Ö –∞–¥–º–∏–Ω—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º.

---

## üìä –û–±—â–∏–µ –∫–æ–º–∞–Ω–¥—ã

### `/admin`
**–ì–ª–∞–≤–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é —Å–æ –≤—Å–µ–º–∏ –∞–¥–º–∏–Ω—Å–∫–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/admin
```

### `/debugdata`
**–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ context.user_data
- –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/debugdata
```

---

## üí∞ –ü–ª–∞—Ç–µ–∂–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∏

### `/grant_subscription`
**–í—ã–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –≤—Ä—É—á–Ω—É—é**
- –í—ã–¥–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –±–µ–∑ –æ–ø–ª–∞—Ç—ã
- –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–π, –ø—Ä–æ–º–æ-–∞–∫—Ü–∏–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/grant_subscription <user_id> <plan_id> [duration_days]

–ü—Ä–∏–º–µ—Ä—ã:
/grant_subscription 123456789 trial_1rub      # Trial –Ω–∞ 7 –¥–Ω–µ–π
/grant_subscription 123456789 monthly_full    # –ú–µ—Å—è—á–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
/grant_subscription 123456789 monthly_full 14 # –ù–∞ 14 –¥–Ω–µ–π
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ plan_id:**
- `trial_1rub` - –ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (7 –¥–Ω–µ–π)
- `monthly_full` - –ü–æ–ª–Ω–∞—è –º–µ—Å—è—á–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
- `monthly_6months` - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ 6 –º–µ—Å—è—Ü–µ–≤
- –ú–æ–¥—É–ª—å–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏: `modular_task19`, `modular_task24`, `modular_task25`

### `/revoke`
**–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É**
- –û—Ç–º–µ–Ω—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ù–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ–Ω—å–≥–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/revoke <user_id>

–ü—Ä–∏–º–µ—Ä:
/revoke 123456789
```

### `/activate_payment`
**–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å pending –ø–ª–∞—Ç–µ–∂**
- –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É –¥–ª—è –ø–ª–∞—Ç–µ–∂–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "pending"
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞ webhook –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/activate_payment <order_id>

–ü—Ä–∏–º–µ—Ä:
/activate_payment ORDER_123456

# –ë–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ pending –ø–ª–∞—Ç–µ–∂–µ–π:
/activate_payment
```

### `/check_webhook`
**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook
- URL –¥–ª—è Tinkoff
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å endpoint

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/check_webhook
```

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### `/payment_stats`
**–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π**
- –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞ (–∑–∞ –≤—Å—ë –≤—Ä–µ–º—è, –º–µ—Å—è—Ü, –Ω–µ–¥–µ–ª—é, —Å–µ–≥–æ–¥–Ω—è)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è trial ‚Üí paid
- –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ churn
- –°—Ä–µ–¥–Ω–∏–π —á–µ–∫

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/payment_stats
```

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
```
üí∞ –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–õ–ê–¢–ï–ñ–ï–ô

üìä –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞:
  ‚Ä¢ –ó–∞ –≤—Å—ë –≤—Ä–µ–º—è: 45,000‚ÇΩ
  ‚Ä¢ –ó–∞ –º–µ—Å—è—Ü: 12,500‚ÇΩ
  ‚Ä¢ –ó–∞ –Ω–µ–¥–µ–ª—é: 3,200‚ÇΩ
  ‚Ä¢ –°–µ–≥–æ–¥–Ω—è: 750‚ÇΩ

üë• –ü–æ–¥–ø–∏—Å—á–∏–∫–∏:
  ‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã—Ö: 42
  ‚Ä¢ Trial: 15
  ‚Ä¢ Paying: 27
  ‚Ä¢ Trial ‚Üí Paid: 35%

üì¶ –ü–æ —Ç–∞—Ä–∏—Ñ–∞–º:
  ‚Ä¢ –ü–æ–ª–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞: 18 (45,000‚ÇΩ)
  ‚Ä¢ –ú–æ–¥—É–ª—å–Ω–∞—è: 9 (11,250‚ÇΩ)
  ...
```

### `/stats`
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤**
- –ö—Ä–∞—Ç–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º
- –ê–∫—Ç–∏–≤–Ω—ã–µ, trial, –∏—Å—Ç–µ–∫—à–∏–µ
- –ë—ã—Å—Ç—Ä—ã–π –æ–±–∑–æ—Ä

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/stats
```

### `/list_subscribers`
**–°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- –¢–∞—Ä–∏—Ñ, –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è, –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ
- –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ (–ø–æ 10)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/list_subscribers
```

### `/promo_usage`
**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤**
- –ö–∞–∫–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω –∫–∞–∂–¥—ã–π
- –û–±—â–∞—è —Å–∫–∏–¥–∫–∞ –ø–æ –ø—Ä–æ–º–æ–∫–æ–¥—É
- –ö—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/promo_usage [promo_code]

–ü—Ä–∏–º–µ—Ä—ã:
/promo_usage          # –í—Å–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã
/promo_usage TOP20    # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥
```

---

## üîî Retention —Å–∏—Å—Ç–µ–º–∞

### `/retention_stats`
**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ retention —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, –∫–ª–∏–∫–∏, –∫–æ–Ω–≤–µ—Ä—Å–∏–∏)
- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —Å–µ–≥–º–µ–Ω—Ç–∞–º (BOUNCED, CURIOUS, TRIAL, etc.)
- Click rate –∏ conversion rate
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/retention_stats
```

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
```
üìä RETENTION –°–¢–ê–¢–ò–°–¢–ò–ö–ê

üìà –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
  ‚Ä¢ –í—Å–µ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 145
  ‚Ä¢ –ö–ª–∏–∫–æ–≤: 52 (35.9%)
  ‚Ä¢ –ö–æ–Ω–≤–µ—Ä—Å–∏–π: 8 (5.5%)
  ‚Ä¢ –°–µ–≥–æ–¥–Ω—è: 23
  ‚Ä¢ –ó–∞ –Ω–µ–¥–µ–ª—é: 89

üéØ –ü–æ —Å–µ–≥–º–µ–Ω—Ç–∞–º:

üöÄ BOUNCED
  –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 34 | –ö–ª–∏–∫–æ–≤: 12 (35.3%) | –ö–æ–Ω–≤–µ—Ä—Å–∏–π: 2 (5.9%)

üíé TRIAL_USER
  –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 28 | –ö–ª–∏–∫–æ–≤: 15 (53.6%) | –ö–æ–Ω–≤–µ—Ä—Å–∏–π: 4 (14.3%)

‚ö†Ô∏è CHURN_RISK
  –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 19 | –ö–ª–∏–∫–æ–≤: 8 (42.1%) | –ö–æ–Ω–≤–µ—Ä—Å–∏–π: 2 (10.5%)

...
```

### `/promo_stats`
**–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤**
- –¢–æ–ø –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –ø–æ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º
- –ö–ª–∏–∫–∏ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- –ü—Ä–æ—Ü–µ–Ω—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/promo_stats
```

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
```
üéÅ –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ú–û–ö–û–î–û–í

üìä –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏: 98
üí∞ –ö–æ–Ω–≤–µ—Ä—Å–∏–π —á–µ—Ä–µ–∑ –ø—Ä–æ–º–æ–∫–æ–¥—ã: 8

üìà –¢–æ–ø –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:

üè∑Ô∏è LAST50 (50% —Å–∫–∏–¥–∫–∞)
  –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 12 | –ö–ª–∏–∫–æ–≤: 8 | –ö–æ–Ω–≤–µ—Ä—Å–∏–π: 3 (25%)

üè∑Ô∏è RETURN40 (40% —Å–∫–∏–¥–∫–∞)
  –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 15 | –ö–ª–∏–∫–æ–≤: 9 | –ö–æ–Ω–≤–µ—Ä—Å–∏–π: 2 (13.3%)

üè∑Ô∏è URGENT30 (30% —Å–∫–∏–¥–∫–∞)
  –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 18 | –ö–ª–∏–∫–æ–≤: 11 | –ö–æ–Ω–≤–µ—Ä—Å–∏–π: 2 (11.1%)

...
```

### `/test_notification`
**–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç retention —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–µ–±–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- 17 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/test_notification <trigger>

–ü—Ä–∏–º–µ—Ä—ã:
/test_notification bounced_day1
/test_notification trial_expiring_2days
/test_notification churn_risk_3days
/test_notification cancelled_day7

# –ë–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤:
/test_notification
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã:**

**BOUNCED:**
- `bounced_day1` - –î–µ–Ω—å 1 –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `bounced_day3` - –î–µ–Ω—å 3 –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**CURIOUS:**
- `curious_day3` - 3 –¥–Ω—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `curious_day7` - 7 –¥–Ω–µ–π –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**TRIAL:**
- `trial_day3` - 3 –¥–µ–Ω—å trial
- `trial_expiring_2days` - –ó–∞ 2 –¥–Ω—è –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è
- `trial_expiring_1day` - –ü–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å trial
- `trial_expired` - Trial –∏—Å—Ç—ë–∫

**CHURN_RISK:**
- `churn_risk_7days` - –ó–∞ 7 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è
- `churn_risk_3days` - –ó–∞ 3 –¥–Ω—è –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è
- `churn_risk_1day` - –ü–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å –ø–æ–¥–ø–∏—Å–∫–∏

**CANCELLED:**
- `cancelled_day1` - 1 –¥–µ–Ω—å –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã
- `cancelled_day3` - 3 –¥–Ω—è –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã
- `cancelled_day7` - –ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å (7 –¥–Ω–µ–π)

**ACTIVE_FREE:**
- `active_free_day10` - 10 –¥–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `active_free_day20` - 20 –¥–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (—Ç–æ–ø 10%)
- `active_free_limit_warning` - –î–æ—Å—Ç–∏–≥–Ω—É—Ç –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç

**PAYING_INACTIVE:**
- `paying_inactive_day3` - 3 –¥–Ω—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `paying_inactive_day7` - 7 –¥–Ω–µ–π –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `paying_inactive_day14` - 14 –¥–Ω–µ–π –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## üë§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### `/auto_renewal`
**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏—è**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏–≤—è–∑–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞, —Å–ª–µ–¥—É—é—â–∞—è –æ–ø–ª–∞—Ç–∞
- –ò—Å—Ç–æ—Ä–∏—è –∞–≤—Ç–æ–ø–ª–∞—Ç–µ–∂–µ–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/auto_renewal <user_id>

–ü—Ä–∏–º–µ—Ä:
/auto_renewal 123456789
```

---

## üêõ –ñ–∞–ª–æ–±—ã –∏ –º–æ–¥–µ—Ä–∞—Ü–∏—è

### `/review_complaint`
**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∂–∞–ª–æ–±—É**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∂–∞–ª–æ–±—ã
- –û–¥–æ–±—Ä–∏—Ç—å –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/review_complaint <complaint_id>

–ü—Ä–∏–º–µ—Ä:
/review_complaint 42
```

### `/pending_complaints`
**–°–ø–∏—Å–æ–∫ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∂–∞–ª–æ–±**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∂–∞–ª–æ–±—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "pending"
- –£–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã –ø–æ –¥–∞—Ç–µ
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/pending_complaints
```

### `/hints_list`
**–°–ø–∏—Å–æ–∫ –ø–æ–¥—Å–∫–∞–∑–æ–∫ –¥–ª—è –∂–∞–ª–æ–±**
- –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ç–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–æ–∫
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/hints_list
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç—ã

### `/check_admin`
**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–º–∏–Ω—Å–∫–∏–µ –ø—Ä–∞–≤–∞**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–æ–º
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–¥–º–∏–Ω–æ–≤
- –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/check_admin [user_id]

–ü—Ä–∏–º–µ—Ä—ã:
/check_admin           # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–±—è
/check_admin 123456789 # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—Ä—É–≥–æ–≥–æ
```

---

## üìä SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

### Retention —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```sql
-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–µ–≥–º–µ–Ω—Ç–∞–º
SELECT * FROM notification_stats_by_segment;

-- –î–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
SELECT * FROM notification_stats_daily
ORDER BY date DESC LIMIT 7;

-- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
SELECT * FROM notification_promo_performance
ORDER BY conversion_rate DESC;

-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
SELECT user_id, segment, trigger, clicked, converted,
       datetime(sent_at, 'localtime') as sent_at
FROM notification_log
ORDER BY sent_at DESC
LIMIT 20;
```

### –ü–ª–∞—Ç–µ–∂–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∏

```sql
-- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
SELECT u.user_id, u.username, u.first_name,
       s.plan_id, s.expires_at, s.auto_renew
FROM subscriptions s
JOIN users u ON s.user_id = u.user_id
WHERE s.status = 'active'
ORDER BY s.expires_at;

-- –í—ã—Ä—É—á–∫–∞ –∑–∞ –º–µ—Å—è—Ü
SELECT
    strftime('%Y-%m', created_at) as month,
    COUNT(*) as orders,
    SUM(amount) as revenue
FROM payments
WHERE status = 'completed'
GROUP BY month
ORDER BY month DESC;

-- –ö–æ–Ω–≤–µ—Ä—Å–∏—è trial ‚Üí paid
SELECT
    COUNT(DISTINCT CASE WHEN plan_id LIKE '%trial%' THEN user_id END) as trial_users,
    COUNT(DISTINCT CASE WHEN plan_id NOT LIKE '%trial%' AND status='active' THEN user_id END) as paid_users
FROM subscriptions;
```

---

## üö® –ß–∞—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏

### –î–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É —Ç–µ—Å—Ç–µ—Ä—É
```
/grant_subscription 123456789 monthly_full 30
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—á–µ–º—É –Ω–µ –ø—Ä–∏—à–ª–∞ –ø–æ–¥–ø–∏—Å–∫–∞
```
1. /activate_payment                    # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å pending
2. /activate_payment ORDER_123456       # –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é
3. /check_webhook                       # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å retention
```
1. /retention_stats                     # –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
2. /promo_stats                         # –ö–∞–∫–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç
3. /test_notification bounced_day1      # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç
```

### –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞—Ä—É—à–∏—Ç–µ–ª—é
```
/revoke 123456789
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ —Å–ø–∏—Å–∞–Ω–∏–µ–º
```
/auto_renewal 123456789
```

---

## üí° –°–æ–≤–µ—Ç—ã

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /admin** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é

2. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ retention** –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø–æ—Å–ª–µ 17:00:
   ```
   /retention_stats
   ```

3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ conversion rate** –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é:
   ```
   /promo_stats
   ```

4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–æ–≤:
   ```
   /test_notification trial_expiring_1day
   ```

5. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ pending –ø–ª–∞—Ç–µ–∂–∏** –µ—Å–ª–∏ –µ—Å—Ç—å –∂–∞–ª–æ–±—ã:
   ```
   /activate_payment
   ```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–∞–∂–Ω–æ:**
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∞–º (–ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ @admin_only)
- –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–≤ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `config/admins.json`
- –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –∞–¥–º–∏–Ω—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

**–î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∞:**
–î–æ–±–∞–≤—å—Ç–µ user_id –≤ `config/admins.json`:
```json
{
  "admins": [123456789, 987654321]
}
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∞: `/check_admin`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `journalctl -u ege-bot -n 100`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞: `systemctl restart ege-bot`

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è retention: `RETENTION_SYSTEM.md`
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç retention: `RETENTION_QUICKSTART.md`
